"use strict";(self.webpackChunkecomm_client=self.webpackChunkecomm_client||[]).push([[60],{8635:(e,t,l)=>{l.d(t,{c:()=>i});l(9060);var d=l(696),s=l(2496);const i=function(e){var t;let{cards:l}=e;return(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"homeProduct d-flex justify-content-center gap-2 flex-wrap mx-2",children:null===(t=Array(l).fill(0))||void 0===t?void 0:t.map(((e,t)=>(0,s.jsxs)("div",{className:"card",style:{width:"20rem",margin:"0 10px 12px 10px",height:"500px"},children:[(0,s.jsx)(d.c,{style:{height:"230px",marginBottom:"4px"}}),(0,s.jsxs)("div",{className:"card-body bg-info-subtle",children:[(0,s.jsx)(d.c,{style:{width:"80%",marginBottom:"4px"}}),(0,s.jsx)(d.c,{style:{width:"100%",height:"90px",marginBottom:"4px"}}),(0,s.jsx)(d.c,{style:{width:"20%",marginTop:"4px"}}),(0,s.jsx)(d.c,{style:{width:"40%",height:"40px",marginBottom:"4px"}}),(0,s.jsx)(d.c,{style:{width:"40%",height:"40px",marginBottom:"4px"}})]})]},t)))})})})}},7428:(e,t,l)=>{l.d(t,{c:()=>i});l(9060);var d=l(7360),s=l(2496);const i=function(){return(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)(d.CS,{visible:!0,height:"160",width:"160",ariaLabel:"dna-loading",wrapperStyle:{},wrapperClass:"dna-wrapper"})})}},8928:(e,t,l)=>{l.r(t),l.d(t,{default:()=>y});var d=l(8372),s=l(9060),i=l(1560),o=l(12),n=l(7908),c=l(8635),a=l(3096),r=l(9867),u=l(4320),v=l(5008),x=l(224),m=l(2496);const p=function(e){let{handleSubmit:t,value:l,setValue:d}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("form",{style:{background:"linear-gradient(to right top, #d16ba5, #c777b9, #ba83ca, #aa8fd8, #9a9ae1, #8aa7ec, #79b3f4, #69bff8, #52cffe, #41dfff, #46eefa, #5ffbf1)",border:"2px solid red",borderRadius:"15px",padding:"1rem 1.6rem"},onSubmit:t,children:[(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsx)("input",{style:{background:"skyblue"},type:"number",min:"0",max:"5",className:"form-control",placeholder:"Enter product rating",value:l,onChange:e=>d(e.target.value)})}),(0,m.jsx)("button",{type:"submit",style:{margin:"-10px 0 10px 0"},className:"btn btn-primary",children:"Submit"})]})})};var h=l(6792),g=l(9307);const f=function(e){let{handleSubmit:t,value:l,setValue:d}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("form",{style:{background:"linear-gradient(to right top, #d16ba5, #c777b9, #ba83ca, #aa8fd8, #9a9ae1, #8aa7ec, #79b3f4, #69bff8, #52cffe, #41dfff, #46eefa, #5ffbf1)",border:"2px solid red",borderRadius:"15px",padding:"1rem 1.6rem"},onSubmit:t,children:[(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsx)("input",{style:{background:"skyblue"},type:"text",className:"form-control",maxLength:50,placeholder:"Enter product comment",value:l,onChange:e=>d(e.target.value)})}),(0,m.jsx)("button",{type:"submit",style:{margin:"-10px 0 10px 0"},className:"btn btn-danger",children:"Post Comment"})]})})};var j=l(7428),b=l(6564);const y=function(){var e,t,l,y,w,N,_;const S=(0,i.W4)(),[k,C]=(0,s.useState)(""),[I,B]=(0,s.useState)([]),[P,R]=(0,s.useState)(""),[F,D]=(0,s.useState)(""),[T,z]=(0,s.useState)(!1),[J,L]=(0,s.useState)(!0),{cart:O,setCart:V}=(0,a.c)(),{auth:E}=(0,r.c)(),{visitedProduct:W,setVisitedProduct:G}=(0,g.c)(),[A,H]=(0,s.useState)(!1),[M,$]=(0,s.useState)(!1),[Y,q]=(0,s.useState)(""),[K,Q]=(0,s.useState)([]),[U,X]=(0,s.useState)(""),[Z,ee]=(0,s.useState)(!1),[te,le]=(0,s.useState)([]),[de,se]=(0,s.useState)(""),[ie,oe]=(0,s.useState)(""),ne=(0,i.i6)(),ce=async e=>{ee(!0);try{const{data:s}=await d.c.get("/api/v1/product/get-product-comment/".concat(e));var t,l;if(!0===s.success)Q(null===s||void 0===s||null===(t=s.existingProduct)||void 0===t?void 0:t.comment),le(null===s||void 0===s||null===(l=s.existingProduct)||void 0===l?void 0:l.users),ee(!1);else ee(!1)}catch(s){ee(!1),console.log(s)}},ae=async()=>{try{var e,t,l,s,i;const{data:o}=await d.c.get("/api/v1/product/get-product/".concat(S.slug));C(null===o||void 0===o?void 0:o.product),ue(null===o||void 0===o||null===(e=o.product)||void 0===e?void 0:e._id),ce(null===o||void 0===o||null===(t=o.product)||void 0===t?void 0:t._id),re(null===o||void 0===o||null===(l=o.product)||void 0===l?void 0:l._id,null===o||void 0===o||null===(s=o.product)||void 0===s||null===(i=s.category)||void 0===i?void 0:i._id),async function(e){if(e){let i=JSON.parse(localStorage.getItem("visitedProduct"));if(i){if(G(i),0!==i.filter((t=>{if((null===e||void 0===e?void 0:e._id)===(null===t||void 0===t?void 0:t._id))return t})).length)return null;var t,l;G([...W,{...e,userId:null===E||void 0===E||null===(t=E.user)||void 0===t?void 0:t._id}]),localStorage.setItem("visitedProduct",JSON.stringify([...W,{...e,userId:null===E||void 0===E||null===(l=E.user)||void 0===l?void 0:l._id}]))}else{var d,s;G([...W,{...e,userId:null===E||void 0===E||null===(d=E.user)||void 0===d?void 0:d._id}]),localStorage.setItem("visitedProduct",JSON.stringify([...W,{...e,userId:null===E||void 0===E||null===(s=E.user)||void 0===s?void 0:s._id}]))}}}(null===o||void 0===o?void 0:o.product)}catch(o){console.log(o)}},re=async(e,t)=>{try{z(!0);const{data:l}=await d.c.get("/api/v1/product/similar-product/".concat(e,"/").concat(t));B(null===l||void 0===l?void 0:l.products),z(!1)}catch(l){console.log(l)}};async function ue(e){try{const{data:t}=await d.c.get("/api/v1/product/get-rating/".concat(e));if(t.success){let e=Math.round(null===t||void 0===t?void 0:t.productRating);R(e),D(null===t||void 0===t?void 0:t.productRatingCount)}}catch(t){console.log(t),u.cp.error("something went wrong")}}return(0,s.useEffect)((()=>{(null===S||void 0===S?void 0:S.slug)&&ae()}),[null===S||void 0===S?void 0:S.slug]),(0,s.useEffect)((()=>{if(k){let e=!O.find((e=>(null===e||void 0===e?void 0:e._id)===(null===k||void 0===k?void 0:k._id)));L(e)}}),[k]),(0,m.jsxs)(n.c,{clName:"bg-danger-subtle",title:"Product Details",children:[(0,m.jsxs)("div",{className:" row  mt-4 mx-4 p-2 d-flex align-items-center ",children:[(0,m.jsx)("div",{className:"col-md-6 completeFrame",children:(0,m.jsx)("div",{className:"outerFrame",children:(0,m.jsx)("div",{className:"detailsImage  px-2 d-flex  justify-content-center align-items-center",children:(0,m.jsx)("div",{children:k&&(0,m.jsx)(b.c,{smallImage:{alt:"Wristwatch by Ted Baker London",src:"/api/v1/product/product-photo/".concat(null===k||void 0===k?void 0:k._id),width:480,height:420},largeImage:{src:"/api/v1/product/product-photo/".concat(null===k||void 0===k?void 0:k._id),width:600,height:850}})})})})}),(0,m.jsxs)("div",{className:"mt-2 mx-4 col-md-5",style:{borderLeft:"2px solid magenta"},children:[(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("h2",{style:{borderBottom:"3px solid salmon",maxWidth:"250px"},children:"Product Detail"})}),(0,m.jsxs)("h5",{style:{paddingBottom:"6px",borderBottom:"1px solid purple"},className:"fs-3 fw-bold text-secondary",children:["Name:"," ",(0,m.jsx)("span",{className:"fw-bold fs-4 text-black",children:null===k||void 0===k?void 0:k.name})]}),(0,m.jsxs)("h6",{style:{paddingBottom:"6px",borderBottom:"1px solid purple"},className:"fs-3 fw-bold text-secondary",children:["Desciption:"," ",(0,m.jsx)("span",{className:"fw-bold fs-4 text-black",children:null===k||void 0===k?void 0:k.description})]}),(0,m.jsxs)("h6",{style:{paddingBottom:"6px",borderBottom:"1px solid purple"},className:"fs-3 fw-bold text-secondary",children:["Price:"," ",(0,m.jsxs)("span",{className:"fw-bold fs-4 text-black",children:["$",null===k||void 0===k?void 0:k.price]})]}),(0,m.jsxs)("h6",{style:{paddingBottom:"6px",borderBottom:"1px solid purple"},className:"fs-3 fw-bold text-secondary",children:["Category:"," ",(0,m.jsx)("span",{className:"fw-bold fs-4 text-black",children:null===k||void 0===k||null===(e=k.category)||void 0===e?void 0:e.name})]}),(0,m.jsxs)("h6",{style:{paddingBottom:"6px",borderBottom:"1px solid purple"},className:"fs-3 fw-bold text-secondary",children:["Shipping:"," ",(0,m.jsx)("span",{className:"fw-bold fs-4 text-black",children:!0===(null===k||void 0===k?void 0:k.shipping)?"Yes":"No"})]}),(0,m.jsxs)("div",{style:{paddingBottom:"6px",borderBottom:"1px solid purple"},className:"fs-4 fw-bold text-secondary",children:[" ","Rating:"," ",(0,m.jsx)("span",{className:"fw-semibold fs-5 text-danger",children:0===P||void 0===P?null:1===P?(0,m.jsx)(h.eoy,{}):2===P?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{})]}):3===P?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{})]}):4===P?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{}),(0,m.jsx)(h.eoy,{})]})})," ",(0,m.jsxs)("span",{className:"fw-semibold fs-6 ",children:["(",F,")"]})]}),(0,m.jsx)("div",{style:{paddingBottom:"6px",borderBottom:"1px solid purple"},children:(0,m.jsx)("button",{onClick:()=>{H(!0)},className:"btn btn-success fs-5 p-1 mt-1 fw-semibold text-light",children:"Rate This Product"})}),"660c3a703b009992de3e49a4"===(null===k||void 0===k||null===(t=k.category)||void 0===t?void 0:t._id)||"660c3a813b009992de3e49a9"===(null===k||void 0===k||null===(l=k.category)||void 0===l?void 0:l._id)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"Select color"}),(0,m.jsx)(v.cp.Group,{onChange:e=>se(e.target.value),children:(null===k||void 0===k||null===(y=k.colors)||void 0===y?void 0:y.length)&&(null===k||void 0===k||null===(w=k.colors)||void 0===w?void 0:w.map(((e,t)=>(0,m.jsx)("div",{children:(0,m.jsx)(v.cp,{className:"fs-6 fw-bold",value:e,style:{background:"".concat(e),width:"45px",padding:"3px",borderRadius:"10px",display:"flex",justifyContent:"center"}})},t))))})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"Select size"}),(0,m.jsx)(v.cp.Group,{onChange:e=>oe(e.target.value),children:(null===k||void 0===k||null===(N=k.sizes)||void 0===N?void 0:N.length)&&(null===k||void 0===k||null===(_=k.sizes)||void 0===_?void 0:_.map(((e,t)=>(0,m.jsx)("div",{children:(0,m.jsx)(v.cp,{className:"text-black fs-6 fw-bold",value:e,children:e})},t))))})]})]}):(0,m.jsx)("h5",{children:"No selection"}),(0,m.jsx)("button",{className:"btn btn-info text-light mt-2 fw-bold",onClick:()=>{var e,t,l;if(null===E||void 0===E||null===(e=E.user)||void 0===e||!e._id)return void u.cp.error("Please login to add to cart");if(!O.find((e=>(null===e||void 0===e?void 0:e._id)===(null===k||void 0===k?void 0:k._id))))if("660c3a703b009992de3e49a4"===(null===k||void 0===k||null===(t=k.category)||void 0===t?void 0:t._id)||"660c3a813b009992de3e49a9"===(null===k||void 0===k||null===(l=k.category)||void 0===l?void 0:l._id)){if(!de||!ie)return void u.cp.error("select color and size first");V([...O,{...k,userId:null===E||void 0===E?void 0:E.user.email,color:de,size:ie}]),L(!1),localStorage.setItem("cart",JSON.stringify([...O,{...k,userId:null===E||void 0===E?void 0:E.user.email,color:de,size:ie}])),u.cp.success("Items added to cart")}else V([...O,{...k,userId:null===E||void 0===E?void 0:E.user.email}]),L(!1),localStorage.setItem("cart",JSON.stringify([...O,{...k,userId:null===E||void 0===E?void 0:E.user.email}])),u.cp.success("Items added to cart")},disabled:!J,children:O.find((e=>(null===e||void 0===e?void 0:e._id)===(null===k||void 0===k?void 0:k._id)))?"Go To Cart":"Add To Cart"})]})]}),(0,m.jsx)("div",{children:(0,m.jsx)(x.c,{onCancel:()=>H(!1),footer:null,visible:A,children:(0,m.jsx)(p,{value:Y,setValue:q,handleSubmit:async function(e){e.preventDefault();try{var t;const{data:e}=await d.c.put("/api/v1/product/update-rating/".concat(null===E||void 0===E||null===(t=E.user)||void 0===t?void 0:t._id,"/").concat(null===k||void 0===k?void 0:k._id),{rating:Y});var l;if(null!==e&&void 0!==e&&e.success)u.cp.success(null===e||void 0===e?void 0:e.message),q(""),H(!1),ue(null===(l=e.product)||void 0===l?void 0:l._id);else e.success,u.cp.error(null===e||void 0===e?void 0:e.message)}catch(s){console.log(s),u.cp.error("something went wrong")}}})})}),(0,m.jsxs)("div",{className:"row w-full p-6 container mt-3 mb-3 d-flex mx-5 justify-content-center align-items-center",children:[(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("h3",{children:"Product Images"})}),(0,m.jsx)("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:k.productImages&&k.productImages.map((e=>(0,m.jsx)("img",{src:e,className:"prodImgs",style:{height:"230px",width:"300px"},alt:"product_image"})))})]}),(0,m.jsxs)("div",{className:"row w-full p-6 container mt-3 mb-3 d-flex flex-column mx-5 justify-content-center ",children:[(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("h2",{children:"Related Products"})}),I.length<1?(0,m.jsx)("p",{className:"text-center fw-bold",children:"No Related Product Found"}):(0,m.jsx)("div",{children:T?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(c.c,{cards:4})}):(0,m.jsx)("div",{className:"similarProduct d-flex gap-2 justify-content-center flex-wrap",children:null===I||void 0===I?void 0:I.map((e=>(0,m.jsxs)("div",{className:"card",style:{width:"22rem",marginLeft:"16px",height:"500px"},children:[(0,m.jsx)(o.cH,{to:"/product/".concat(null===e||void 0===e?void 0:e.slug),style:{textDecoration:"none"},className:"product_link",children:e&&(0,m.jsx)("img",{src:"/api/v1/product/product-photo/".concat(null===e||void 0===e?void 0:e._id),className:"card-img-top",style:{height:"230px"},alt:"product_image"})},null===e||void 0===e?void 0:e._id),(0,m.jsxs)("div",{className:"card-body",style:{backgroundColor:"#af69ee"},children:[(0,m.jsxs)(o.cH,{to:"/product/".concat(null===e||void 0===e?void 0:e.slug),style:{textDecoration:"none",color:"black"},className:"product_link",children:[(0,m.jsx)("h5",{className:"card-title",style:{height:"70px",marginTop:"-10px"},children:null===e||void 0===e?void 0:e.name}),(0,m.jsxs)("p",{className:"card-text",style:{overflow:"hidden",height:"100px",marginTop:"-10px"},children:[null===e||void 0===e?void 0:e.description.substring(0,200),"..."]})]},null===e||void 0===e?void 0:e._id),(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,m.jsxs)("p",{className:"card-text",style:{fontWeight:"500",fontSize:"20px",marginTop:"-10px"},children:["$ ",null===e||void 0===e?void 0:e.price]}),(0,m.jsx)("button",{onClick:()=>ne("/product/".concat(null===e||void 0===e?void 0:e.slug)),className:"btn ms-2  btn-danger",children:"More Details"})]})]})]},null===e||void 0===e?void 0:e._id)))})})]}),(0,m.jsxs)("div",{className:"row container w-full mt-3 mb-3 d-flex flex-column mx-5 justify-content-between",children:[(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("h2",{children:"Products Review"})}),Z?(0,m.jsx)(j.c,{}):(0,m.jsxs)("div",{className:"bg-success-subtle w-100 text-center",children:[(0,m.jsx)("button",{onClick:()=>{$(!0)},className:"btn btn-warning border-2 border-danger fs-5 p-1 mt-1 fw-semibold text-light",children:"Review Product"}),(0,m.jsx)(x.c,{onCancel:()=>$(!1),footer:null,visible:M,children:(0,m.jsx)(f,{value:U,setValue:X,handleSubmit:async e=>{try{var t;e.preventDefault(),ee(!0);const{data:l}=await d.c.post("/api/v1/product/create-user-comment",{userId:null===E||void 0===E||null===(t=E.user)||void 0===t?void 0:t._id,productId:null===k||void 0===k?void 0:k._id,comment:U});$(!1),l.success&&u.cp.success("Review added successfully"),!1===l.success&&u.cp.error("Comment in this product already added by you"),ce(null===k||void 0===k?void 0:k._id),ee(!1)}catch(l){ee(!1),console.log(l)}}})}),(0,m.jsxs)("div",{children:[K.length?(0,m.jsx)("h4",{children:"Product comments"}):null,(0,m.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,m.jsx)("div",{children:K.length?(0,m.jsx)("div",{children:K.map(((e,t)=>(0,m.jsxs)("h6",{style:{borderBottom:"2px solid green",display:"flex",gap:"10px",justifyContent:"start"},children:[t+1,". ",(0,m.jsx)("span",{className:"text-danger",children:e})]},t)))}):null}),(0,m.jsx)("div",{children:te.length?(0,m.jsx)("div",{children:te.map(((e,t)=>(0,m.jsx)("h6",{style:{borderBottom:"2px solid green"},children:e.name},t)))}):null})]})]})]})]})]})}}}]);
//# sourceMappingURL=60.d3a4f728.chunk.js.map